================================================================================
                    LEGAL ASSISTANT SYSTEM ARCHITECTURE
                         With API Integrations
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER INTERFACE                                  â”‚
â”‚                           (React Frontend)                                   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Chat          â”‚  â”‚  Case Lookup   â”‚  â”‚  Amendment     â”‚               â”‚
â”‚  â”‚  Interface     â”‚  â”‚  Modal         â”‚  â”‚  Generator     â”‚               â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚               â”‚
â”‚  â”‚  - Text input  â”‚  â”‚  - Search form â”‚  â”‚  - Doc type    â”‚               â”‚
â”‚  â”‚  - Messages    â”‚  â”‚  - Filters     â”‚  â”‚  - Details     â”‚               â”‚
â”‚  â”‚  - Upload      â”‚  â”‚  - Results     â”‚  â”‚  - Preview     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Chat History  â”‚  â”‚  Voice Chat    â”‚  â”‚  Settings      â”‚               â”‚
â”‚  â”‚  Search        â”‚  â”‚                â”‚  â”‚                â”‚               â”‚
â”‚  â”‚                â”‚  â”‚  - Mic input   â”‚  â”‚  - Language    â”‚               â”‚
â”‚  â”‚  - Sessions    â”‚  â”‚  - TTS output  â”‚  â”‚  - Country     â”‚               â”‚
â”‚  â”‚  - Search      â”‚  â”‚  - Andy voice  â”‚  â”‚  - Law type    â”‚               â”‚
â”‚  â”‚  - Delete      â”‚  â”‚                â”‚  â”‚                â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ HTTP/HTTPS
                                    â”‚ REST API
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            BACKEND SERVER                                    â”‚
â”‚                          (FastAPI - Python)                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         API ENDPOINTS                                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  Chat:                    Legal APIs:              Auth:             â”‚  â”‚
â”‚  â”‚  â€¢ /api/artillery/chat    â€¢ /api/legal/case-      â€¢ /api/auth/token â”‚  â”‚
â”‚  â”‚  â€¢ /api/artillery/upload    lookup                â€¢ /api/auth/verifyâ”‚  â”‚
â”‚  â”‚  â€¢ /api/voice/transcribe  â€¢ /api/legal/generate-  â€¢ /api/auth/      â”‚  â”‚
â”‚  â”‚  â€¢ /api/voice/speak         amendment               check-access    â”‚  â”‚
â”‚  â”‚                           â€¢ /api/legal/search-                       â”‚  â”‚
â”‚  â”‚  History:                   statutes             Translation:        â”‚  â”‚
â”‚  â”‚  â€¢ /api/chat-history/                            â€¢ /api/translate    â”‚  â”‚
â”‚  â”‚    save                                          â€¢ /api/translate/   â”‚  â”‚
â”‚  â”‚  â€¢ /api/chat-history/                              languages         â”‚  â”‚
â”‚  â”‚    search                                                            â”‚  â”‚
â”‚  â”‚  â€¢ /api/chat-history/                                                â”‚  â”‚
â”‚  â”‚    sessions                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        SERVICE LAYER                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ Legal API       â”‚  â”‚ Chat History    â”‚  â”‚ Translation     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ Integrations    â”‚  â”‚ Service         â”‚  â”‚ Service         â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Case lookup   â”‚  â”‚ â€¢ Save messages â”‚  â”‚ â€¢ Translate     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Amendments    â”‚  â”‚ â€¢ Search        â”‚  â”‚ â€¢ Detect lang   â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Statutes      â”‚  â”‚ â€¢ Sessions      â”‚  â”‚ â€¢ 30+ langs     â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Mock fallback â”‚  â”‚ â€¢ Delete        â”‚  â”‚ â€¢ Mock fallback â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ RBAC Service    â”‚  â”‚ LLM Client      â”‚  â”‚ Vector Store    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ 4 roles       â”‚  â”‚ â€¢ OpenAI        â”‚  â”‚ â€¢ FAISS         â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Permissions   â”‚  â”‚ â€¢ Chat          â”‚  â”‚ â€¢ Embeddings    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ JWT tokens    â”‚  â”‚ â€¢ Streaming     â”‚  â”‚ â€¢ Search        â”‚    â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Usage limits  â”‚  â”‚                 â”‚  â”‚                 â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES & STORAGE                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      LEGAL API PROVIDERS                              â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  CaseText   â”‚  â”‚ LexisNexis  â”‚  â”‚  Westlaw    â”‚  â”‚ LegalZoom  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Case lookup â”‚  â”‚ Case lookup â”‚  â”‚ Case lookup â”‚  â”‚ Amendments â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Citations   â”‚  â”‚ Documents   â”‚  â”‚ Research    â”‚  â”‚ Documents  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      AI & TRANSLATION                                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚  OpenAI API     â”‚  â”‚  Google         â”‚  â”‚  OpenAI         â”‚    â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚  Translate      â”‚  â”‚  Whisper/TTS    â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ GPT-4        â”‚  â”‚                 â”‚  â”‚                 â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Chat         â”‚  â”‚  â€¢ 30+ langs    â”‚  â”‚  â€¢ Voice input  â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Embeddings   â”‚  â”‚  â€¢ Detection    â”‚  â”‚  â€¢ Voice output â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      DATA STORAGE                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Local JSON â”‚  â”‚  MongoDB    â”‚  â”‚  Firebase   â”‚  â”‚  FAISS     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Chat historyâ”‚  â”‚ Chat historyâ”‚  â”‚ Chat historyâ”‚  â”‚ Vectors    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ No setup    â”‚  â”‚ Scalable    â”‚  â”‚ Cloud-based â”‚  â”‚ Embeddings â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Default     â”‚  â”‚ Optional    â”‚  â”‚ Optional    â”‚  â”‚ Local      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                            DATA FLOW DIAGRAM
================================================================================

USER ACTION: Search for a legal case
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User clicks "ğŸ” Case Lookup" button
   â”‚
   â–¼
2. CaseLookup modal opens
   â”‚
   â–¼
3. User enters search query: "Miranda v. Arizona"
   â”‚
   â–¼
4. Frontend sends POST request to /api/legal/case-lookup
   â”‚
   â–¼
5. Backend checks RBAC permissions (Premium required)
   â”‚
   â”œâ”€ No permission â†’ Return upgrade info
   â”‚
   â””â”€ Has permission â–¼
                     â”‚
6. Legal API Integration Service called
   â”‚
   â”œâ”€ API key configured â†’ Call CaseText API
   â”‚                       â”‚
   â”‚                       â–¼
   â”‚                    Get real case data
   â”‚
   â””â”€ No API key â†’ Return mock data (landmark cases)
                   â”‚
                   â–¼
7. Format results with citations, relevance scores
   â”‚
   â–¼
8. Return JSON response to frontend
   â”‚
   â–¼
9. CaseLookup component displays results
   â”‚
   â–¼
10. User clicks on a case â†’ Insert into chat

================================================================================

USER ACTION: Generate legal amendment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User clicks "ğŸ“ Amendments" button
   â”‚
   â–¼
2. AmendmentGenerator modal opens
   â”‚
   â–¼
3. User selects document type and enters details
   â”‚
   â–¼
4. Frontend sends POST request to /api/legal/generate-amendment
   â”‚
   â–¼
5. Backend checks RBAC permissions (Premium required)
   â”‚
   â”œâ”€ No permission â†’ Return upgrade info
   â”‚
   â””â”€ Has permission â–¼
                     â”‚
6. Legal API Integration Service called
   â”‚
   â”œâ”€ API key configured â†’ Call LegalZoom API
   â”‚                       â”‚
   â”‚                       â–¼
   â”‚                    Generate real document
   â”‚
   â””â”€ No API key â†’ Generate mock document
                   â”‚
                   â–¼
7. Format document with professional disclaimer
   â”‚
   â–¼
8. Return JSON response with document content
   â”‚
   â–¼
9. AmendmentGenerator displays document
   â”‚
   â–¼
10. User can copy or download document

================================================================================

USER ACTION: Chat with legal assistant
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User types message and clicks Send
   â”‚
   â–¼
2. Frontend sends POST request to /api/artillery/chat
   â”‚
   â–¼
3. Backend receives message with context:
   - Law category
   - Jurisdiction
   - Language
   - User preferences
   â”‚
   â–¼
4. Vector Store searches for relevant documents
   â”‚
   â–¼
5. Build prompt with:
   - User question
   - Retrieved documents
   - Legal context
   â”‚
   â–¼
6. Call OpenAI API for response
   â”‚
   â–¼
7. Format response with citations
   â”‚
   â–¼
8. Save to chat history:
   POST /api/chat-history/save
   â”‚
   â”œâ”€ Local storage (default)
   â”œâ”€ MongoDB (if configured)
   â””â”€ Firebase (if configured)
   â”‚
   â–¼
9. Return response to frontend
   â”‚
   â–¼
10. Display in chat interface
    â”‚
    â–¼
11. If auto-read enabled â†’ Speak response using TTS

================================================================================

USER ACTION: Search chat history
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User clicks "ğŸ’¬ History" button
   â”‚
   â–¼
2. ChatHistorySearch modal opens
   â”‚
   â–¼
3. Load user sessions:
   GET /api/chat-history/sessions/{user_id}
   â”‚
   â–¼
4. Display sessions list
   â”‚
   â–¼
5. User enters search query
   â”‚
   â–¼
6. Frontend sends POST request to /api/chat-history/search
   â”‚
   â–¼
7. Backend searches through:
   - Message content
   - Response content
   - Metadata
   â”‚
   â–¼
8. Return matching messages with highlighting
   â”‚
   â–¼
9. Display results in search tab
   â”‚
   â–¼
10. User clicks message â†’ Insert into current chat

================================================================================
                         SECURITY FLOW
================================================================================

Authentication Flow (RBAC)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. User requests access to premium feature
   â”‚
   â–¼
2. Frontend checks if token exists
   â”‚
   â”œâ”€ No token â†’ Request token generation
   â”‚              POST /api/auth/token?user_id=X&role=premium
   â”‚              â”‚
   â”‚              â–¼
   â”‚           Backend generates JWT token with:
   â”‚           - User ID
   â”‚           - Role (guest/standard/premium/admin)
   â”‚           - Permissions list
   â”‚           - Expiration time
   â”‚              â”‚
   â”‚              â–¼
   â”‚           Return token to frontend
   â”‚
   â””â”€ Has token â–¼
                â”‚
3. Frontend includes token in Authorization header
   â”‚
   â–¼
4. Backend verifies token:
   GET /api/auth/verify
   â”‚
   â”œâ”€ Invalid/Expired â†’ Return 401 Unauthorized
   â”‚
   â””â”€ Valid â–¼
            â”‚
5. Extract user role and permissions
   â”‚
   â–¼
6. Check if user has required permission
   â”‚
   â”œâ”€ No permission â†’ Return upgrade recommendation
   â”‚
   â””â”€ Has permission â–¼
                     â”‚
7. Process request and return response

================================================================================
                         DEPLOYMENT ARCHITECTURE
================================================================================

Development Environment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend    â”‚         â”‚  Backend     â”‚
â”‚  localhost   â”‚  HTTP   â”‚  localhost   â”‚
â”‚  :5173       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  :8000       â”‚
â”‚              â”‚         â”‚              â”‚
â”‚  npm run dev â”‚         â”‚  uvicorn     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Local Storage   â”‚
                    â”‚  â€¢ JSON files    â”‚
                    â”‚  â€¢ FAISS index   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Production Environment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Load       â”‚
                    â”‚   Balancer   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚Frontendâ”‚   â”‚Frontendâ”‚   â”‚Frontendâ”‚
         â”‚Server 1â”‚   â”‚Server 2â”‚   â”‚Server 3â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API        â”‚
                    â”‚   Gateway    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚Backend â”‚   â”‚Backend â”‚   â”‚Backend â”‚
         â”‚Server 1â”‚   â”‚Server 2â”‚   â”‚Server 3â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚            â”‚            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼            â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚MongoDB â”‚   â”‚ Redis   â”‚   â”‚Externalâ”‚
         â”‚Cluster â”‚   â”‚ Cache   â”‚   â”‚  APIs  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
                         TECHNOLOGY STACK
================================================================================

Frontend
â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ React 18
â€¢ Vite (build tool)
â€¢ CSS3 (custom styling)
â€¢ Fetch API (HTTP requests)

Backend
â”€â”€â”€â”€â”€â”€â”€
â€¢ Python 3.8+
â€¢ FastAPI (web framework)
â€¢ Uvicorn (ASGI server)
â€¢ Pydantic (data validation)
â€¢ PyJWT (authentication)
â€¢ httpx (async HTTP client)

AI & ML
â”€â”€â”€â”€â”€â”€â”€
â€¢ OpenAI GPT-4 (chat)
â€¢ OpenAI Embeddings (vector search)
â€¢ OpenAI Whisper (voice input)
â€¢ OpenAI TTS (voice output)
â€¢ Sentence Transformers (local embeddings)

Storage
â”€â”€â”€â”€â”€â”€â”€
â€¢ FAISS (vector database)
â€¢ JSON (local storage)
â€¢ MongoDB (optional)
â€¢ Firebase (optional)

External APIs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ CaseText (case lookup)
â€¢ LexisNexis (case lookup)
â€¢ Westlaw (case lookup)
â€¢ LegalZoom (document generation)
â€¢ Google Translate (translation)

================================================================================
                         END OF DIAGRAM
================================================================================
